<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Эльфийский транслит by may-cat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <style>
      @font-face {
        font-family: "Tengwar";
        src: url(./tngan.ttf) format("truetype");
      }
      .tengwar { font-family: "Tengwar"; font-size:30px; }
    </style>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Эльфийский транслит</h1>
      <h2 class="project-tagline">Эльфийский транслит. Транслитерирует русский язык на тенгвар.</h2>
      <a href="index.html" class="btn">Транслит текста</a>
      <a href="learn.html" class="btn">Научиться бегло читать</a>
    </section>

    <section class="main-content">
      <h3>
<a id="Добро-пожаловать" class="anchor" href="#%D0%94%D0%BE%D0%B1%D1%80%D0%BE-%D0%BF%D0%BE%D0%B6%D0%B0%D0%BB%D0%BE%D0%B2%D0%B0%D1%82%D1%8C" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Добро пожаловать!</h3>

        <p>Вашему вниманию представлен инструмент для транслитерации русского текста на тенгвар.</p>
        <p>Подобно тому, kak vy pishete traslitom po-russki, можно писать эльфийскими буквами. Правила соответствия букв тенгвам - предмет споров, в этом нет согласия ни в русском, ни в английском языке. Данный скрипт опирается на <a href="http://hex.pp.ua/tengwar.php">статью автора амдф</a>, где всё очень подробно описано. Английский язык транлитерирован <a href="http://www.omniglot.com/conscripts/tengwar_eng.htm">по другой статье</a></p>
        <p>Использованный шрифт - <a href="tngan.ttf">Tengwar Annatar</a> свободно скачивается в интернете. Разработчикам может быть интересен разработанный мной <a href="data.json">json-файл с regExp-шаблонами</a>, делающими всю магию.</p>
        <br/>
        <p>Приятного использования!</p>
        <textarea name="q" id="q" cols="90" rows="10"></textarea><br>
        <div class="tengwar" id="target"></div>

        <script type="text/javascript">
    var arrayOfTeng = [];
    var config = [];
    var curTengwa = {};
    $(document).ready(function(){
        $.ajax({
            dataType: "json",
            url: "data_2.json",
            success: function(x){
                arrayOfTeng = x.regex_en;// @todo: array_merge with x.regex_ru!!!
                config = x.config;
            },
            //async: false
        });
        // По нажатию клавиши - проходимся по всем словам и заменяем в них буквы по шаблонам
        $('#q').keyup(function() {
            var txt = $(this).val();
            $('#target').html('');
            // Разбиваем по словам
            var arTxt = txt.split(' ');
            for (i in arTxt) {
                // Применяем все шаблоны по очереди
                for (curTengwa in arrayOfTeng) {
                    var re = new RegExp(arrayOfTeng[curTengwa].regexp, "ig");
                    if (arTxt[i].match(re))
                        arTxt[i] = arTxt[i].replace(re, arrayOfTeng[curTengwa].replace);
                    console.log(arTxt[i]);
                }
                var re = new RegExp(config.delimiterbefore, "ig");
                arTxt[i] = arTxt[i].replace(re,"");
                var re = new RegExp(config.delimiterafter, "ig");
                arTxt[i] = arTxt[i].replace(re,"");
                $('#target').append(arTxt[i]+' ');
            }
        });

    });


</script>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/may-cat/elvish-translit">Эльфийский транслит</a> is maintained by <a href="https://github.com/may-cat">may-cat</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter29909234 = new Ya.Metrika({
                    id:29909234,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    webvisor:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
    <noscript><div><img src="https://mc.yandex.ru/watch/29909234" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

  </body>
</html>
